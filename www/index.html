<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <title></title>

    <link rel="manifest" href="manifest.json">

    <!-- un-comment this code to enable service worker
    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('service-worker.js')
          .then(() => console.log('service worker installed'))
          .catch(err => console.log('Error', err));
      }
    </script>-->
<!--     <link href="css/mobile_app.css" rel="stylesheet"> -->
    <link href="lib/ionic/css/ionic.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    

    <!-- IF using Sass (run gulp sass first), then uncomment below and remove the CSS includes above
    <link href="css/ionic.app.css" rel="stylesheet">
    -->

    <!-- ionic/angularjs js -->
    

    <!-- cordova script (this will be a 404 during development) -->
    <script src="cordova.js"></script>

    <!-- your app's js -->
  

    <script src="lib/ionic/js/ionic.bundle.js"></script>
    <script src="lib/ngCordova/dist/ng-cordova.min.js"></script>
    <script src="js/app.js"></script>
    <script src="js/controllers.js"></script>
    <script src="js/services.js"></script>
   <!--  <script src="js/pulltorefresh.js"></script> -->
  </head>
  <body ng-app="starter">
    <!--
      The nav bar that will be updated as we navigate between views.
    -->
    <!-- <ion-nav-bar class="bar-stable">
      <ion-nav-back-button>
      </ion-nav-back-button>
   
    </ion-nav-bar> -->

     
  
    <!--
      The views will be rendered in the <ion-nav-view> directive below
      Templates are in the /templates folder (but you could also
      have templates inline in this html file if you'd like).
    -->
    <ion-nav-view></ion-nav-view>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


<script type="text/javascript" src="js/smk-accordion.js"></script> 
    <script type="text/javascript">
function showHideClient(val){
    if(val=='client'){
  $(".adviser-btn").removeClass("current");     
  $(".general-user-btn").addClass("current");  
    $("#general-user-tab").show();
  $("#general-user-tab li").removeClass("current");
  $("#general-user-tab li:first-child").addClass("current");
  $("#adviser-tab").hide();
  $("#user-tab-1").show();
  $("#user-tab-2").hide();
  $("#user-tab-3").hide();
  $("#tab-1").show();
  $("#tab-2").hide();
  $("#tab-3").hide();
    }else if (val=='advisor'){
  $(".adviser-btn").addClass("current");  
  $(".general-user-btn").removeClass("current");      
    $("#adviser-tab").show();
  $("#adviser-tab li").removeClass("current");
  $("#adviser-tab li:first-child").addClass("current");
   $("#general-user-tab").hide();
    $("#tab-1").show();
    $("#tab-2").hide();
    $("#tab-3").hide();
    $("#user-tab-1").hide();
    $("#user-tab-2").hide();
    $("#user-tab-3").hide();
    }
  }

  function search(keyword)
  {
    //alert(keyword);
        if (keyword.length>2)
     {

      var URL = "https://www.app.constructionadvisor.com.au/newssearch/"+keyword;
            $.ajax({
              type: "GET",
              url: URL,
              dataType :'json',
              success: function(data)
              {
                //alert('2');
                  $('#recentnews').hide();
                  //$('#news li').remove();
                  $("#news").html('');
                  $("#news_detail").html('');
                  $.each(data.records,function (index, value) { 

                    //alert('dsf');

                    var content = '<div class="card"><div class="item item-text-wrap"><h2><strong><a href="#/tab/chats/'+value.postID+'">'+value.postTitle+'</a></strong></h2><br /><img class="full-image" src="'+value.postImage+'"/><br /><div>'+value.postContent+'..</div></div></div>';

                    /*'<li><div class="sub-routes"><h3><a href="news-single.html?id='+value.postID+'">'+value.postTitle+'</a></h3><p>'+value.postContent+'....</p><img src="'+value.postImage+'"></div></li>';*/
                    $("#news").append(content);
                    $("#news_detail").append(content);

                 });
               
              },
          }); 
     }

     if (keyword.length==0)
     {

      var URL = "https://www.app.constructionadvisor.com.au/newsAPI";
            $.ajax({
              type: "GET",
              url: URL,
              dataType :'json',
              success: function(data)
              {
                //alert('0');
                  $('.single-news').hide();
                  //$('#news li').remove();
                  $("#news").html('');
                  $("#news_detail").html('');
                  $.each(data.records,function (index, value) { 

                    var content = '<div class="card"><div class="item item-text-wrap"><h2><strong><a href="#/tab/chats/'+value.postID+'">'+value.postTitle+'</a></strong></h2><br /><img class="full-image" src="'+value.postImage+'"/><br /><div>'+value.postContent+'..</div></div></div>';

                    /*'<li><div class="sub-routes"><h3><a href="news-single.html?id='+value.postID+'">'+value.postTitle+'</a></h3><p>'+value.postContent+'....</p><img src="'+value.postImage+'"></div></li>';*/
                    $("#news").append(content);
                     $("#news_detail").append(content);

                 });
               
              },
          }); 
     }
  }

//$(document).ready(function () {
/*function showHideFilter(){
  //alert("asd asd");
  $("#listToggle").click(function(){
      alert("toggle");
      $("#dropdownlist").toggle();
  });

  $("#detToggle").click(function(){
      alert("toggle");
      $("#dropdown").toggle();
  });
}*/
  
//});

  function get_filtered_records()
{
  var arr = [];
  $('input.filter_chkbox:checkbox:checked').each(function () {
    arr.push($(this).val());
  });
  //alert(arr.length);
  if (arr.length>0) 
  {
    $('.smk_accordion').toggle();
     var URL = "https://www.app.constructionadvisor.com.au/newstype";
            $.ajax({
              type: "POST",
              url: URL,
              data : $('.filter_chkbox').serialize(),
              dataType :'json',
              success: function(data)
              {

                  $('#recentnews').hide();
                  //$('#news li').remove();
                  $("#news").html('');
                  $("#news_detail").html('');
                  $.each(data.records,function (index, value) { 

                    

                    var content = '<div class="card"><div class="item item-text-wrap"><h2><strong><a href="#/tab/chats/'+value.postID+'">'+value.postTitle+'</a></strong></h2><br /><img class="full-image" src="'+value.postImage+'"/><br /><div>'+value.postContent+'..</div></div></div>';

                    /*'<li><div class="sub-routes"><h3><a href="news-single.html?id='+value.postID+'">'+value.postTitle+'</a></h3><p>'+value.postContent+'....</p><img src="'+value.postImage+'"></div></li>';*/
                    $("#news").append(content);
                    $("#news_detail").append(content);

                 });

              },
          }); 
  }
  else
  {
            $('.smk_accordion').toggle();
            var URL = "https://www.app.constructionadvisor.com.au/newsAPI";
            $.ajax({
              type: "GET",
              url: URL,
              dataType :'json',
              success: function(data)
              {
                  $('#recentnews').hide();
                  //$('#news li').remove();
                  $("#news").html('');
                  $("#news_detail").html('');
                  $.each(data.records,function (index, value) { 


                    var content = '<div class="card"><div class="item item-text-wrap"><h2><strong><a href="#/tab/chats/'+value.postID+'">'+value.postTitle+'</a></strong></h2><br /><img class="full-image" src="'+value.postImage+'"/><br /><div>'+value.postContent+'..</div></div></div>';

                    /*'<li><div class="sub-routes"><h3><a href="news-single.html?id='+value.postID+'">'+value.postTitle+'</a></h3><p>'+value.postContent+'....</p><img src="'+value.postImage+'"></div></li>';*/
                    $("#news").append(content);
                    $("#news_detail").append(content);

                 });

              },
          });

  }
}
// for iPhone
//if (navigator.userAgent.match(/(\(iPod|\(iPhone|\(iPad)/)) {

    // if (browserRatio >=1.5) {
    //     $container.css('min-height', '360px');
    // } else {
    //     $container.css('min-height', '555px');
    // }
//}

/*var deviceType = (navigator.userAgent.match(/iPad/i))  == "iPad" ? "iPad" : (navigator.userAgent.match(/iPhone/i))  == "iPhone" ? "iPhone" : (navigator.userAgent.match(/Android/i)) == "Android" ? "Android" : (navigator.userAgent.match(/BlackBerry/i)) == "BlackBerry" ? "BlackBerry" : "null";
if (deviceType == "iPhone" || deviceType == "iPad" ) {
        // $container.css('min-height', '360px');
        $("body").css("margin-top" , "20px");
}*/

// alert(deviceType);


 /*PullToRefresh.init({
    mainElement: '#pull2refresh',
    onRefresh: function(){
        // What do you want to do when the user does the pull-to-refresh gesture
        window.location.reload(); 
    }

});*/
</script>
  </body>
  
</html>
